{% extends "base.html" %}

{% block extra_style %}
<style>
main {
    padding-top: 0 !important;
}

#intro {
    margin-top: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
}

#intro video {
    max-width: 100%;
    max-height: 80vh;
    min-width: 300px;
    min-height: 300px;
    flex-shrink: 1;
}

@keyframes title-fade-in {
    0% {
        opacity: 0;
        scale: 50%;
    }
    100% {
        opacity: 1;
        scale: 100%;
    }
}

#intro h1, #intro h2 {
    animation: .4s title-fade-in;
    animation-delay: 1s;
    animation-fill-mode: backwards;
    
    margin: 0;
    text-align: center;
    letter-spacing: 0.1em;
}

@keyframes scroller {
    0% {
        opacity: 0;
        transform: translateY(-2vh);
    }
    50% {
        opacity: 1;
        transform: translateY(2vh);
    }
    100% {
        opacity: 0;
        transform: translateY(-2vh);
    }
}

#scroll {
    height: 10vh;
    animation: 2s scroller;
    animation-delay: 2s;
    animation-fill-mode: backwards;
    animation-iteration-count: infinite;
}

.disable-animation {
    animation: none !important;
    opacity: 0 !important;
}

iframe {
    /*
    Without setting the color scheme, the embed has an opaque white background.

    iframes have the "helpful" property of rendering a TRANSPARENT background
    when the outer and inner page's `color-scheme`s MATCH, and an OPAQUE
    background (corresponding to the inner color scheme) when they MISMATCH.

    So even though we want the embed to have a dark (transparent) background,
    the way we do that in this case is to set the iframe's color-scheme to
    `light` (totally not confusing, right?)

    https://elvery.net/drzax/iframe-background-colour-transparent-dark-mode/
    */
    color-scheme: light;

    display: block;
    margin: 0 auto;
    max-width: 100%;
}
</style>
{% endblock extra_style %}

{% block main %}
<div id="intro">
    <video muted autoplay playsinline preload="auto">
        <source src="media/logo-video-cropped.webm" type="video/webm"></source>
    </video>
    <h1 style="margin-bottom: 0">FROZEN PIZZA</h1>
    <h2>STUDIOS</h2>
    <div id="scroll">
        <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 9L12 15L18 9" stroke="white" stroke-width="0.5" stroke-linecap="flat" stroke-linejoin="round"/>
        </svg>
    </div>
</div>

<div style="margin-bottom: 1em">
    {% for game in config.extra.steam_games %}
    <iframe
        src="https://store.steampowered.com/widget/{{ game.widget_id }}/?utm_source=fps-website"
        frameborder="0"
        width="650"
        height="190">
    </iframe>
    {% endfor %}
</div>

<div class="h-with-nav">
    <h2>Latest Posts</h2>
    <nav>
        <a href="/blog">All Posts</a>
    </nav>
</div>
{% set blog = get_section(path="blog/_index.md") %}
{% set pages = blog.pages %}
{% set page_limit = 3 %}
{% include "post_list.html" %}
{% endblock %}

{% block extra_script %}
<script>
    let scroller = document.getElementById("scroll");
    window.onscroll = function() {
        if (window.scrollY > 0) {
            scroller.classList.add("disable-animation");
        } else {
            scroller.classList.remove("disable-animation");
        }
    };
</script>
{% endblock %}
